(this["webpackJsonpcrypt-amm"]=this["webpackJsonpcrypt-amm"]||[]).push([[0],{10:function(t,e,a){},39:function(t,e){},50:function(t,e,a){"use strict";a.r(e);var n=a(4),i=a(27),s=a.n(i),c=(a(10),a(21));const l=1e6,o=/^[0-9]*[.]?[0-9]{0,6}$/,u=[{inputs:[{internalType:"uint256",name:"_amountToken1",type:"uint256"},{internalType:"uint256",name:"_amountToken2",type:"uint256"}],name:"faucet",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken2",type:"uint256"}],name:"getEquivalentToken1Estimate",outputs:[{internalType:"uint256",name:"reqToken1",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken1",type:"uint256"}],name:"getEquivalentToken2Estimate",outputs:[{internalType:"uint256",name:"reqToken2",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMyHoldings",outputs:[{internalType:"uint256",name:"amountToken1",type:"uint256"},{internalType:"uint256",name:"amountToken2",type:"uint256"},{internalType:"uint256",name:"myShare",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolDetails",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken1",type:"uint256"}],name:"getSwapToken1Estimate",outputs:[{internalType:"uint256",name:"amountToken2",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken2",type:"uint256"}],name:"getSwapToken1EstimateGivenToken2",outputs:[{internalType:"uint256",name:"amountToken1",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken2",type:"uint256"}],name:"getSwapToken2Estimate",outputs:[{internalType:"uint256",name:"amountToken1",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken1",type:"uint256"}],name:"getSwapToken2EstimateGivenToken1",outputs:[{internalType:"uint256",name:"amountToken2",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_share",type:"uint256"}],name:"getWithdrawEstimate",outputs:[{internalType:"uint256",name:"amountToken1",type:"uint256"},{internalType:"uint256",name:"amountToken2",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken1",type:"uint256"},{internalType:"uint256",name:"_amountToken2",type:"uint256"}],name:"provide",outputs:[{internalType:"uint256",name:"share",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken1",type:"uint256"}],name:"swapToken1",outputs:[{internalType:"uint256",name:"amountToken2",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken2",type:"uint256"}],name:"swapToken2",outputs:[{internalType:"uint256",name:"amountToken1",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_share",type:"uint256"}],name:"withdraw",outputs:[{internalType:"uint256",name:"amountToken1",type:"uint256"},{internalType:"uint256",name:"amountToken2",type:"uint256"}],stateMutability:"nonpayable",type:"function"}];var r=a(16),d=a(2);function m(t){return Object(d.jsx)("div",{className:"boxTemplate",children:Object(d.jsxs)("div",{className:"boxBody",children:[Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{className:"leftHeader",children:[" ",t.leftHeader," "]}),Object(d.jsx)("input",{className:"textField",value:t.value,onChange:e=>(e=>{(""===e.target.value||o.test(e.target.value))&&t.onChange(e)})(e),placeholder:"Enter amount"})]}),Object(d.jsx)("div",{className:"rightContent",children:t.right})]})})}function j(t){const[e,a]=Object(n.useState)(["USDT","CRYPT"]),[i,s]=Object(n.useState)(0),[c,o]=Object(n.useState)(0),u=async a=>{if(!["","."].includes(a)&&null!==t.contract)try{let n;n="USDT"===e[0]?await t.contract.getSwapToken1Estimate(a*l):await t.contract.getSwapToken2Estimate(a*l),o(n/l)}catch(i){var n;alert(null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)}},j=a=>{o(a.target.value),(async a=>{if(!["","."].includes(a)&&null!==t.contract)try{let n;n="USDT"===e[0]?await t.contract.getSwapToken1EstimateGivenToken2(a*l):await t.contract.getSwapToken2EstimateGivenToken1(a*l),s(n/l)}catch(i){var n;alert(null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)}})(a.target.value)};return Object(d.jsxs)("div",{className:"tabBody",children:[Object(d.jsx)(m,{leftHeader:"From",right:e[0],value:i,onChange:t=>{return s((e=t).target.value),void u(e.target.value);var e}}),Object(d.jsx)("div",{className:"swapIcon",onClick:()=>(a([...e.reverse()]),void u(i)),children:Object(d.jsx)(r.b,{})}),Object(d.jsx)(m,{leftHeader:"To",right:e[1],value:c,onChange:t=>j(t)}),Object(d.jsx)("div",{className:"bottomDiv",children:Object(d.jsx)("div",{className:"btn",onClick:()=>(async()=>{if(["","."].includes(i))alert("Amount should be a valid number");else if(null!==t.contract)try{let a;a="USDT"===e[0]?await t.contract.swapToken1(i*l):await t.contract.swapToken2(i*l),await a.wait(),s(0),o(0),await t.getHoldings(),alert("Success!")}catch(n){var a;alert(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)}else alert("Connect to Metamask")})(),children:"Swap"})})]})}function v(t){const[e,a]=Object(n.useState)(0),[i,s]=Object(n.useState)(0),[c,o]=Object(n.useState)(""),u=async(e,n)=>{if(!["","."].includes(n)&&null!==t.contract)try{let i;"USDT"===e?(i=await t.contract.getEquivalentToken2Estimate(n*l),s(i/l)):(i=await t.contract.getEquivalentToken1Estimate(n*l),a(i/l))}catch(c){var i;if(console.log("Err: ",c),c.data.message.includes("Zero Liquidity"))o("Message: Empty pool. Set the initial conversion rate.");else alert(null===c||void 0===c||null===(i=c.data)||void 0===i?void 0:i.message)}};return Object(d.jsxs)("div",{className:"tabBody",children:[Object(d.jsx)(m,{leftHeader:"Amount of USDT",value:e,onChange:t=>(t=>{a(t.target.value),u("USDT",t.target.value)})(t)}),Object(d.jsx)("div",{className:"swapIcon",children:Object(d.jsx)(r.a,{})}),Object(d.jsx)(m,{leftHeader:"Amount of CRYPT",value:i,onChange:t=>(t=>{s(t.target.value),u("CRYPT",t.target.value)})(t)}),Object(d.jsx)("div",{className:"error",children:c}),Object(d.jsx)("div",{className:"bottomDiv",children:Object(d.jsx)("div",{className:"btn",onClick:()=>(async()=>{if(["","."].includes(e)||["","."].includes(i))alert("Amount should be a valid number");else if(null!==t.contract)try{let n=await t.contract.provide(e*l,i*l);await n.wait(),a(0),s(0),await t.getHoldings(),alert("Success"),o("")}catch(c){var n;c&&alert(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.message)}else alert("Connect to Metamask")})(),children:"Provide"})})]})}function b(t){const[e,a]=Object(n.useState)(0),[i,s]=Object(n.useState)([]);return Object(d.jsxs)("div",{className:"tabBody",children:[Object(d.jsx)(m,{leftHeader:"Amount:",right:Object(d.jsx)("div",{onClick:()=>(async()=>{if(null!==t.contract){a(t.maxShare);let e=await t.contract.getWithdrawEstimate(t.maxShare*l);s([e.amountToken1/l,e.amountToken2/l])}else alert("Connect to Metamask")})(),className:"getMax",children:"Max"}),value:e,onChange:e=>(async e=>{if(a(e.target.value),!["","."].includes(e.target.value)&&null!==t.contract)try{let a=await t.contract.getWithdrawEstimate(e.target.value*l);s([a.amountToken1/l,a.amountToken2/l])}catch(i){var n;alert(null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)}})(e)}),i.length>0&&Object(d.jsxs)("div",{className:"withdrawEstimate",children:[Object(d.jsxs)("div",{className:"amount",children:["Amount of USDT: ",i[0]]}),Object(d.jsxs)("div",{className:"amount",children:["Amount of CRYPT: ",i[1]]})]}),Object(d.jsx)("div",{className:"bottomDiv",children:Object(d.jsx)("div",{className:"btn",onClick:()=>(async()=>{if(["","."].includes(e))alert("Amount should be a valid number");else if(t.maxShare<e)alert("Amount should be less than your max share");else if(null!==t.contract)try{let n=await t.contract.withdraw(e*l);console.log(n),await n.wait(),a(0),s([]),await t.getHoldings(),alert("Success!")}catch(i){var n;alert(null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)}else alert("Connect to Metamask")})(),children:"Withdraw"})})]})}function p(t){const[e,a]=Object(n.useState)(0),[i,s]=Object(n.useState)(0);return Object(d.jsxs)("div",{className:"tabBody",children:[Object(d.jsx)(m,{leftHeader:"Amount of USDT",right:"USDT",value:e,onChange:t=>(t=>{a(t.target.value)})(t)}),Object(d.jsx)(m,{leftHeader:"Amount of CRYPT",right:"CRYPT",value:i,onChange:t=>(t=>{s(t.target.value)})(t)}),Object(d.jsx)("div",{className:"bottomDiv",children:Object(d.jsx)("div",{className:"btn",onClick:()=>async function(){if(null!==t.contract)if(["","."].includes(e)||["","."].includes(i))alert("Amount should be a valid number");else try{let n=await t.contract.faucet(e*l,i*l),c=await n.wait();console.log("res",c),a(0),s(0),await t.getHoldings(),alert("Success")}catch(o){var n,c;(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.message)&&alert(null===o||void 0===o||null===(c=o.data)||void 0===c?void 0:c.message),console.log(o)}else alert("Connect to Metamask")}(),children:"Fund"})})]})}function y(t){const[e,a]=Object(n.useState)("Swap"),[i,s]=Object(n.useState)(0),[c,o]=Object(n.useState)(0),[u,r]=Object(n.useState)(0),[m,y]=Object(n.useState)(0),[h,T]=Object(n.useState)(0),[g,O]=Object(n.useState)(0);async function w(){try{console.log("Fetching holdings----");let e=await t.contract.getMyHoldings();s(e.amountToken1/l),o(e.amountToken2/l),r(e.myShare/l),e=await t.contract.getPoolDetails(),y(e[0]/l),T(e[1]/l),O(e[2]/l)}catch(e){console.log("Couldn't Fetch holdings",e)}}Object(n.useEffect)((()=>{w()}));const x=t=>{a(t)};return Object(d.jsxs)("div",{className:"centerBody",children:[Object(d.jsxs)("div",{className:"centerContainer",children:[Object(d.jsxs)("div",{className:"selectTab",children:[Object(d.jsx)("div",{className:"tabStyle "+("Swap"===e?"activeTab":""),onClick:()=>x("Swap"),children:"Swap"}),Object(d.jsx)("div",{className:"tabStyle "+("Provide"===e?"activeTab":""),onClick:()=>x("Provide"),children:"Provide"}),Object(d.jsx)("div",{className:"tabStyle "+("Withdraw"===e?"activeTab":""),onClick:()=>x("Withdraw"),children:"Withdraw"}),Object(d.jsx)("div",{className:"tabStyle "+("Faucet"===e?"activeTab":""),onClick:()=>x("Faucet"),children:"Faucet"})]}),"Swap"===e&&Object(d.jsx)(j,{contract:t.contract,getHoldings:()=>w()}),"Provide"===e&&Object(d.jsx)(v,{contract:t.contract,getHoldings:()=>w()}),"Withdraw"===e&&Object(d.jsx)(b,{contract:t.contract,maxShare:u,getHoldings:()=>w()}),"Faucet"===e&&Object(d.jsx)(p,{contract:t.contract,getHoldings:()=>w()})]}),Object(d.jsx)("div",{className:"details",children:Object(d.jsxs)("div",{className:"detailsBody",children:[Object(d.jsx)("div",{className:"detailsHeader",children:"Details"}),Object(d.jsxs)("div",{className:"detailsRow",children:[Object(d.jsx)("div",{className:"detailsAttribute",children:"Amount of USDT:"}),Object(d.jsx)("div",{className:"detailsValue",children:i})]}),Object(d.jsxs)("div",{className:"detailsRow",children:[Object(d.jsx)("div",{className:"detailsAttribute",children:"Amount of CRYPT:"}),Object(d.jsx)("div",{className:"detailsValue",children:c})]}),Object(d.jsxs)("div",{className:"detailsRow",children:[Object(d.jsx)("div",{className:"detailsAttribute",children:"Your Share:"}),Object(d.jsx)("div",{className:"detailsValue",children:u})]}),Object(d.jsx)("div",{className:"detailsHeader",children:"Pool Details"}),Object(d.jsxs)("div",{className:"detailsRow",children:[Object(d.jsx)("div",{className:"detailsAttribute",children:"Total USDT:"}),Object(d.jsx)("div",{className:"detailsValue",children:m})]}),Object(d.jsxs)("div",{className:"detailsRow",children:[Object(d.jsx)("div",{className:"detailsAttribute",children:"Total CRYPT:"}),Object(d.jsx)("div",{className:"detailsValue",children:h})]}),Object(d.jsxs)("div",{className:"detailsRow",children:[Object(d.jsx)("div",{className:"detailsAttribute",children:"Total Shares:"}),Object(d.jsx)("div",{className:"detailsValue",children:g})]})]})})]})}function h(){const[t,e]=Object(n.useState)(null),[a,i]=Object(n.useState)();let s,l,o;async function r(){if(!0===await async function(){try{return await window.ethereum.enable(),!0}catch(t){return!1}}()){s=new c.a.providers.Web3Provider(window.ethereum),l=s.getSigner(),o=await l.getAddress(),i(o);try{const t=new c.a.Contract("0x0eE93A07C9C74F2D5414D71BB102AE2488Eaa478",u,l);e(t)}catch(t){alert("CONTRACT_ADDRESS not set properly")}}else alert("Couldn't connect to Metamask")}return Object(d.jsxs)("div",{className:"pageBody",children:[Object(d.jsxs)("div",{className:"navBar",children:[Object(d.jsx)("div",{className:"appName",children:" BERACRYPT DEX"}),null===t?Object(d.jsxs)("div",{className:"connectBtn",onClick:()=>r(),children:[" ","Connect to Metamask"," "]}):Object(d.jsxs)("div",{className:"connected",children:[" ","Connected"+a," "]})]}),Object(d.jsx)(y,{contract:t,connect:()=>r()})]})}s.a.render(Object(d.jsx)(h,{}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.f617ed8b.chunk.js.map